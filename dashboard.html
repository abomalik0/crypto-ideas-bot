<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>IN CRYPTO Ai â€” WAR ROOM v3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');

        :root {
            --bg-main: #02040a;
            --bg-main-grad: radial-gradient(circle at top, #111827 0, #02040a 55%);
            --bg-card: rgba(8, 11, 20, 0.96);
            --bg-card-soft: rgba(8, 11, 20, 0.86);
            --border-soft: rgba(148, 163, 184, 0.32);
            --border-strong: rgba(248, 250, 252, 0.04);
            --accent-gold: #fbbf24;
            --accent-gold-soft: rgba(251, 191, 36, 0.2);
            --accent-red: #fb7185;
            --accent-green: #22c55e;
            --accent-blue: #38bdf8;
            --accent-cyan: #06b6d4;
            --text-main: #f9fafb;
            --text-muted: #9ca3af;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: "Cairo", system-ui, sans-serif;
            background:
                radial-gradient(circle at top left, rgba(248, 250, 252, 0.05), transparent 55%),
                radial-gradient(circle at top right, rgba(251, 191, 36, 0.09), transparent 55%),
                var(--bg-main-grad);
            color: var(--text-main);
            min-height: 100vh;
        }

        .layout {
            max-width: 1320px;
            margin: 0 auto 16px;
        }

        /* ===== TOP BTC BAR ===== */
        .btc-bar {
            width: 100%;
            padding: 10px 18px;
            background: linear-gradient(90deg, #020617, #050816);
            border-bottom: 1px solid rgba(148, 163, 184, 0.25);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            justify-content: space-between;
            font-size: 13px;
        }

        .btc-bar-left {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .btc-pill-main {
            padding: 3px 10px;
            border-radius: 999px;
            background: radial-gradient(circle at top, #fbbf24, #f59e0b);
            color: #111827;
            font-weight: 800;
            font-size: 11px;
            letter-spacing: 0.12em;
        }

        .btc-title-mini {
            font-weight: 600;
            color: #e5e7eb;
            font-size: 12px;
        }

        .btc-bar-right {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .btc-metric {
            display: flex;
            align-items: baseline;
            gap: 4px;
        }

        .btc-label {
            color: var(--text-muted);
            font-size: 11px;
        }

        .btc-val {
            font-weight: 600;
            font-size: 13px;
        }

        .btc-green { color: var(--accent-green); }
        .btc-red   { color: var(--accent-red); }

        .btc-mode-chip {
            padding: 4px 11px;
            border-radius: 999px;
            border: 1px solid rgba(251, 191, 36, 0.7);
            font-size: 11px;
            letter-spacing: 0.16em;
            text-transform: uppercase;
            color: #fef3c7;
            background:
                radial-gradient(circle at top, rgba(251, 191, 36, 0.35), transparent 60%),
                rgba(5, 6, 15, 0.97);
        }

        /* ===== HEADER ===== */
        .header {
            padding: 12px 18px 4px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 12px;
        }

        .header-main {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .header-title {
            font-size: 20px;
            font-weight: 800;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #fef3c7;
        }

        .header-sub {
            font-size: 12px;
            color: var(--text-muted);
        }

        .header-badge-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .header-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            background: rgba(15, 23, 42, 0.92);
            color: var(--text-muted);
        }

        .header-badge strong { color: #fef3c7; }

        /* ===== GLOBAL STATUS STRIP (Ø¬Ø¯ÙŠØ¯) ===== */
        .global-strip {
            padding: 0 18px 4px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .global-chip {
            flex: 1 1 180px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.96);
            border: 1px solid rgba(148, 163, 184, 0.4);
            font-size: 11px;
        }

        .chip-label {
            color: var(--text-muted);
        }

        .chip-value {
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .chip-pill {
            padding: 2px 7px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            font-size: 10px;
        }

        .chip-good {
            border-color: rgba(34, 197, 94, 0.8);
            background: rgba(22, 163, 74, 0.15);
            color: #bbf7d0;
        }

        .chip-warn {
            border-color: rgba(234, 179, 8, 0.85);
            background: rgba(202, 138, 4, 0.18);
            color: #fef9c3;
        }

        .chip-bad {
            border-color: rgba(248, 113, 113, 0.9);
            background: rgba(248, 113, 113, 0.18);
            color: #fee2e2;
        }

        /* ===== GRID LAYOUT ===== */
        .grid {
            padding: 8px 18px 18px;
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 12px;
        }

        .span-2 { grid-column: span 2; }
        .span-3 { grid-column: span 3; }

        @media (max-width: 1180px) {
            .grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .span-3 { grid-column: span 2; }
        }

        @media (max-width: 768px) {
            .header { padding: 10px 10px 4px; }
            .btc-bar { padding: 10px 10px; }
            .global-strip { padding: 0 10px 4px; }
            .grid {
                grid-template-columns: minmax(0, 1fr);
                padding: 8px 10px 16px;
            }
            .span-2, .span-3 { grid-column: span 1; }
        }

        /* ===== CARD BASE ===== */
        .card {
            background: linear-gradient(135deg,
                    rgba(15, 23, 42, 0.96),
                    rgba(15, 23, 42, 0.94));
            border-radius: 18px;
            border: 1px solid var(--border-soft);
            padding: 12px 13px 11px;
            position: relative;
            overflow: hidden;
            box-shadow:
                0 24px 40px rgba(0, 0, 0, 0.9),
                0 0 0 1px var(--border-strong);
            backdrop-filter: blur(14px);
            transition:
                transform 0.18s ease-out,
                box-shadow 0.18s ease-out,
                border-color 0.18s ease-out,
                background 0.18s ease-out;
        }

        .card::before {
            content: "";
            position: absolute;
            inset: -40%;
            background:
                radial-gradient(circle at top left, rgba(251, 191, 36, 0.12), transparent 60%),
                radial-gradient(circle at bottom right, rgba(56, 189, 248, 0.12), transparent 55%);
            opacity: 0;
            transition: opacity 0.22s ease-out;
            pointer-events: none;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow:
                0 26px 50px rgba(0, 0, 0, 0.95),
                0 0 0 1px rgba(248, 250, 252, 0.06);
            border-color: rgba(251, 191, 36, 0.6);
        }

        .card:hover::before { opacity: 1; }

        .card-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 6px;
            gap: 6px;
        }

        .card-title {
            font-size: 13px;
            font-weight: 700;
            color: #fef3c7;
        }

        .card-tag {
            font-size: 10px;
            padding: 3px 7px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: var(--text-muted);
            background: rgba(15, 23, 42, 0.96);
        }

        .card-main {
            font-size: 22px;
            font-weight: 800;
            margin-top: 3px;
        }

        .card-main span.small {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
        }

        .subtext {
            font-size: 11px;
            margin-top: 3px;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .kpi-row {
            display: flex;
            flex-wrap: wrap;
            gap: 7px;
            margin-top: 7px;
        }

        .kpi-pill {
            padding: 4px 8px;
            border-radius: 999px;
            background: var(--bg-card-soft);
            border: 1px solid rgba(148, 163, 184, 0.38);
            font-size: 10px;
            display: inline-flex;
            gap: 4px;
            align-items: baseline;
        }

        .kpi-label { color: var(--text-muted); }
        .kpi-val { font-weight: 600; }

        .green  { color: var(--accent-green); }
        .red    { color: var(--accent-red); }
        .gold   { color: var(--accent-gold); }
        .blue   { color: var(--accent-blue); }
        .cyan   { color: var(--accent-cyan); }

        /* ===== HEATBAR ===== */
        .heatbar {
            margin-top: 8px;
            width: 100%;
            height: 7px;
            border-radius: 999px;
            overflow: hidden;
            position: relative;
            background: linear-gradient(90deg,
                        #22c55e,
                        #eab308,
                        #f97316,
                        #ef4444);
        }

        .heatbar-track {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg,
                        rgba(34,197,94,0.05),
                        rgba(250,204,21,0.1),
                        rgba(248,250,252,0.05));
            mix-blend-mode: soft-light;
        }

        .heatbar-dot {
            position: absolute;
            top: 50%;
            width: 18px;
            height: 18px;
            border-radius: 999px;
            transform: translate(-50%, -50%);
            border: 2px solid #111827;
            box-shadow: 0 0 18px rgba(248, 250, 252, 0.9);
            background: #fef3c7;
        }

        .heatbar-labels {
            display: flex;
            justify-content: space-between;
            font-size: 9px;
            color: var(--text-muted);
            margin-top: 3px;
        }

        /* ===== LOG AREA ===== */
        pre {
            margin: 6px 0 0;
            padding: 7px;
            border-radius: 10px;
            background: radial-gradient(circle at top left, #020617, #020617);
            border: 1px solid rgba(148, 163, 184, 0.35);
            font-size: 10px;
            max-height: 148px;
            overflow: auto;
            direction: ltr;
            text-align: left;
            white-space: pre-wrap;
        }

        /* ===== ALERT FLASH ===== */
        .flash {
            animation: flashAnim 0.9s infinite alternate;
        }

        @keyframes flashAnim {
            from {
                box-shadow: 0 0 18px rgba(251, 191, 36, 0.45);
                border-color: rgba(251, 191, 36, 0.9);
            }
            to {
                box-shadow: 0 0 26px rgba(248, 113, 113, 0.95);
                border-color: rgba(248, 113, 113, 0.95);
            }
        }

        .card.gold   { border-color: rgba(251, 191, 36, 0.55); }
        .card.green  { border-color: rgba(34, 197, 94, 0.55); }
        .card.red    { border-color: rgba(248, 113, 113, 0.7); }

        /* ===== BUTTONS ===== */
        .btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
        }

        button {
            border-radius: 999px;
            border: 0;
            padding: 5px 11px;
            font-size: 10px;
            cursor: pointer;
            background: #020617;
            color: #e5e7eb;
            border: 1px solid rgba(148, 163, 184, 0.6);
        }

        button.primary {
            background: radial-gradient(circle at top,
                        #facc15,
                        #f59e0b);
            color: #111827;
            font-weight: 700;
            border-color: transparent;
        }

        button.secondary { border-style: dashed; }

        /* ===== ALERTS LIST ===== */
        .alerts-list {
            margin-top: 4px;
            font-size: 10px;
            max-height: 140px;
            overflow: auto;
            line-height: 1.5;
        }

        .alert-item { margin-bottom: 4px; }

        /* ===== HEATMAP ===== */
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 6px;
            margin-top: 6px;
        }

        .heatmap-cell {
            border-radius: 12px;
            padding: 5px 6px 4px;
            font-size: 10px;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.92));
            border: 1px solid rgba(148, 163, 184, 0.35);
        }

        .heatmap-symbol {
            font-weight: 700;
            font-size: 11px;
        }

        .heatmap-change { font-size: 10px; }

        @media (max-width: 768px) {
            .heatmap-grid {
                grid-template-columns: repeat(3, minmax(0,1fr));
            }
        }

        /* ===== SENTIMENT CARD ===== */
        .sentiment-badge {
            font-size: 11px;
            font-weight: 700;
            padding: 3px 9px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(148, 163, 184, 0.5);
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-top: 3px;
        }

        .sentiment-meter {
            margin-top: 8px;
            width: 100%;
            height: 6px;
            border-radius: 999px;
            overflow: hidden;
            background: linear-gradient(90deg, #22c55e, #eab308, #f97316, #ef4444);
            position: relative;
        }

        .sentiment-pointer {
            position: absolute;
            top: 50%;
            width: 14px;
            height: 14px;
            border-radius: 999px;
            border: 2px solid #020617;
            background: #e5e7eb;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 12px rgba(248, 250, 252, 0.9);
        }

        /* ===== REAL-TIME ENGINE METERS ===== */
        .meter-wrapper {
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .meter-label {
            font-size: 10px;
            color: var(--text-muted);
        }

        .meter-bar {
            width: 100%;
            height: 6px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.96);
            border: 1px solid rgba(148, 163, 184, 0.4);
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            width: 20%;
            border-radius: 999px;
            background: linear-gradient(90deg, #22c55e, #facc15, #f97316);
            transition: width 0.25s ease-out;
        }

        /* ===== FOOTER ===== */
        .footer {
            padding: 4px 18px 8px;
            font-size: 10px;
            text-align: center;
            color: var(--text-muted);
        }

        .footer span { color: #fbbf24; }
    </style>
</head>

<body>

    <!-- ========== TOP BTC BAR ========== -->
    <div id="btcBar" class="btc-bar">
        <div class="btc-bar-left">
            <span class="btc-pill-main">IN CRYPTO Ai</span>
            <span class="btc-title-mini">ØºØ±ÙØ© Ø¹Ù…Ù„ÙŠØ§Øª IN CRYPTO â€” WAR ROOM</span>
        </div>
        <div class="btc-bar-right">
            <div class="btc-metric">
                <span class="btc-label">Ø§Ù„Ø³Ø¹Ø±:</span>
                <span id="barPrice" class="btc-val">-</span>
            </div>
            <div class="btc-metric">
                <span class="btc-label">ØªØºÙŠØ± 24 Ø³:</span>
                <span id="barChange" class="btc-val">-</span>
            </div>
            <div class="btc-metric">
                <span class="btc-label">Ù…Ø¯Ù‰ Ø§Ù„ÙŠÙˆÙ…:</span>
                <span id="barRange" class="btc-val">-</span>
            </div>
            <div id="marketModeChip" class="btc-mode-chip">
                NORMAL MODE
            </div>
        </div>
    </div>

    <div class="layout">
        <!-- ========== HEADER ========== -->
        <div class="header">
            <div class="header-main">
                <div class="header-title">IN CRYPTO â€” WAR ROOM</div>
                <div class="header-sub">
                    ØºØ±ÙØ© Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø±ÙƒØ²ÙŠØ© Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø±ÙƒØ© Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ†ØŒ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©ØŒ Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŒ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù„Ø­Ø¸Ù‰ØŒ ÙˆØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„Ù‰ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.
                </div>
            </div>
            <div class="header-badge-row">
                <div class="header-badge">
                    ÙˆØ¶Ø¹ Ø§Ù„ØªØ´ØºÙŠÙ„: <strong id="badgeMode">NORMAL</strong>
                </div>
                <div class="header-badge">
                    Ø¢Ø®Ø± Ù†Ø¨Ø¶Ø© Real-Time: <strong id="badgeRealtime">---</strong>
                </div>
                <div class="header-badge">
                    Ø³Ø¬Ù„ Ø§Ù„Ø´Ø§ØªØ§Øª: <strong id="badgeChats">0</strong>
                </div>
            </div>
        </div>

        <!-- ========== GLOBAL STATUS STRIP ========== -->
        <div class="global-strip">
            <div class="global-chip">
                <span class="chip-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù…Ø©</span>
                <span class="chip-value" id="chipMode">
                    <span class="chip-pill chip-good">ACTIVE</span>
                </span>
            </div>
            <div class="global-chip">
                <span class="chip-label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±</span>
                <span class="chip-value" id="chipRisk">
                    <span class="chip-pill chip-good">Ù…Ù†Ø®ÙØ¶</span>
                </span>
            </div>
            <div class="global-chip">
                <span class="chip-label">Ù…Ø²Ø§Ø¬ Ø§Ù„Ø³ÙˆÙ‚ (Sentiment)</span>
                <span class="chip-value" id="chipSentiment">
                    <span class="chip-pill chip-warn">Ø¬Ø§Ø±Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨...</span>
                </span>
            </div>
            <div class="global-chip">
                <span class="chip-label">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø­Ø¸Ù‰</span>
                <span class="chip-value" id="chipEngine">
                    <span class="chip-pill chip-good">Ready</span>
                </span>
            </div>
        </div>

        <!-- ========== GRID LAYOUT ========== -->
        <div class="grid">

            <!-- Ù‚ÙˆØ© Ø§Ù„Ø³ÙˆÙ‚ + Heat Score (ÙƒØ¨ÙŠØ±Ø©) -->
            <div class="card span-3" id="marketStrengthCard">
                <div class="card-header">
                    <div class="card-title">Ù‚ÙˆØ© Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¹Ø§Ù…Ø© (Market Strength)</div>
                    <div class="card-tag">BTCUSDT Snapshot</div>
                </div>
                <div class="card-main" id="strengthValue">...</div>
                <div class="subtext">
                    Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¯Ù…Ø¬Ø© Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙˆÙ…Ø¯Ù‰ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ø¹ØªÙ…Ø§Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Binance / KuCoin ÙÙ‚Ø·ØŒ Ø¨Ø¯ÙˆÙ† Ø£Ù‰ Ù…Ø²ÙˆØ¯ Ø®Ø§Ø±Ø¬Ù‰.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Î” Ø§Ù„ÙŠÙˆÙ…:</span>
                        <span class="kpi-val" id="kpiChange">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ù…Ø¯Ù‰ %:</span>
                        <span class="kpi-val" id="kpiRange">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Heat Score:</span>
                        <span class="kpi-val" id="kpiHeat">...</span>
                    </div>
                </div>
                <div class="heatbar">
                    <div class="heatbar-track"></div>
                    <div id="heatDot" class="heatbar-dot" style="left: 10%;"></div>
                </div>
                <div class="heatbar-labels">
                    <span>Ù‡Ø§Ø¯Ø¦</span>
                    <span>Ù†Ø´Ø·</span>
                    <span>Ø³Ø§Ø®Ù†</span>
                    <span>Ù…Ù†Ø·Ù‚Ø© Ø®Ø·Ø±</span>
                </div>
            </div>

            <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± -->
            <div class="card span-1" id="riskCard">
                <div class="card-header">
                    <div class="card-title">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø± (IN CRYPTO Ai)</div>
                    <div class="card-tag">Risk Engine</div>
                </div>
                <div class="card-main" id="riskValue">...</div>
                <div class="subtext" id="riskNote">...</div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¯Ø±Ø¬Ø© Ø§Ù„ØªÙ‚Ù„Ø¨:</span>
                        <span class="kpi-val" id="kpiVol">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙˆÙ‚:</span>
                        <span class="kpi-val" id="kpiMode">...</span>
                    </div>
                </div>
            </div>

            <!-- Ù†Ø¨Ø¶ Ø§Ù„Ø³ÙŠÙˆÙ„Ø© ÙˆØ§Ù„Ø§ØªØ¬Ø§Ù‡ -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Ù†Ø¨Ø¶ Ø§Ù„Ø³ÙŠÙˆÙ„Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† ÙˆØ§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</div>
                    <div class="card-tag">Liquidity Pulse</div>
                </div>
                <div class="card-main" id="liquidityValue">...</div>
                <div class="subtext">
                    Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¨Ø³Ø·Ø© Ù„ØªÙˆØ§Ø²Ù† Ø§Ù„Ø³ÙŠÙˆÙ„Ø© Ø§Ø¹ØªÙ…Ø§Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø§ØªØ¬Ø§Ù‡ BTCUSDTØŒ Ù„ØªÙˆØ¶ÙŠØ­ Ù…Ù† ÙŠØ³ÙŠØ·Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ Ø­Ø§Ù„ÙŠÙ‹Ø§.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©:</span>
                        <span class="kpi-val" id="liqLabel">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ø­Ø±ÙƒØ©:</span>
                        <span class="kpi-val" id="signalPulse">...</span>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ…Ù‰ Ù„Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ‚Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ…Ù‰ Ù„Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ†</div>
                    <div class="card-tag">Volatility Monitor</div>
                </div>
                <div class="card-main">
                    <span id="volatilityValue">...</span>
                    <span class="small">/ 100</span>
                </div>
                <div class="subtext">
                    ÙƒÙ„Ù…Ø§ Ø§Ù‚ØªØ±Ø¨ Ø§Ù„Ù…Ø¤Ø´Ø± Ù…Ù† 100 ÙƒØ§Ù† Ø§Ù„Ø³ÙˆÙ‚ Ø£ÙƒØ«Ø± Ø¹Ø¯ÙˆØ§Ù†ÙŠØ© ÙˆÙŠØ­ØªØ§Ø¬ Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø§Ø·Ø± ØµØ§Ø±Ù…Ø©ØŒ ÙˆÙƒÙ„Ù…Ø§ Ø§Ù‚ØªØ±Ø¨ Ù…Ù† Ø§Ù„ØµÙØ± ÙƒØ§Ù† Ø§Ù„Ø³ÙˆÙ‚ Ø£ÙƒØ«Ø± Ù‡Ø¯ÙˆØ¡Ù‹Ø§.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ù†Ø·Ø§Ù‚ Ø§Ù„ÙŠÙˆÙ…:</span>
                        <span class="kpi-val" id="rangeDetail">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">ÙˆØµÙ Ø§Ù„ØªÙ‚Ù„Ø¨:</span>
                        <span class="kpi-val" id="volatilityLabel">...</span>
                    </div>
                </div>
            </div>

            <!-- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦Ù‰ -->
            <div class="card span-1" id="alertFlashCard">
                <div class="card-header">
                    <div class="card-title">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦Ù‰</div>
                    <div class="card-tag">/auto_alert</div>
                </div>
                <div class="card-main" id="alertReason">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­Ø°ÙŠØ± Ø­Ø§Ù„ÙŠÙ‹Ø§</div>
                <div class="subtext">
                    Ø¢Ø®Ø± Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù…Ø³Ø§Ø± <code>/auto_alert</code> Ù…Ù† Ø§Ù„Ø¨ÙˆØªØŒ Ù…Ø¹ ØªÙ…ÙŠÙŠØ² ØªÙ„Ù‚Ø§Ø¦Ù‰ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ±Ù‰ ÙˆØ¶Ø¹ ØºÙŠØ± Ø·Ø¨ÙŠØ¹Ù‰ ÙÙ‰ Ø§Ù„Ø³ÙˆÙ‚.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¢Ø®Ø± ÙˆÙ‚Øª:</span>
                        <span class="kpi-val" id="alertTime">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŸ</span>
                        <span class="kpi-val" id="alertSent">---</span>
                    </div>
                </div>
                <div class="btn-row">
                    <button class="primary" onclick="callAdmin('force_alert')">Ø¥Ø±Ø³Ø§Ù„ ØªØ­Ø°ÙŠØ± ÙÙˆØ±Ù‰ âš¡</button>
                    <button class="secondary" onclick="callAdmin('test_alert')">ØªÙ†Ø¨ÙŠÙ‡ ØªØ¬Ø±ÙŠØ¨Ù‰ ğŸ§ª</button>
                </div>
            </div>

            <!-- Sentiment / Fear & Greed -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Sentiment Index â€” Fear & Greed</div>
                    <div class="card-tag">IN CRYPTO Ai Gauge</div>
                </div>
                <div class="card-main">
                    <span id="sentimentIndex">-- / 100</span>
                </div>
                <div class="sentiment-badge" id="sentimentBadge">
                    <span id="sentimentLabel">Ø¬Ø§Ø±Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨...</span>
                </div>
                <div class="subtext">
                    Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¬Ù…Ø¹Ø© Ù…Ù† Ø­Ø±ÙƒØ© Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙˆØ§Ù„ØªÙ‚Ù„Ø¨ ÙˆÙ…Ø¯Ù‰ Ø§Ù„ÙŠÙˆÙ…ØŒ Ù„ØªÙ‚Ø¯ÙŠØ± Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³ÙˆÙ‚ Ø£Ù‚Ø±Ø¨ Ù„Ø­Ø§Ù„Ø© Ø®ÙˆÙØŒ Ø­Ø°Ø±ØŒ Ø£Ù… Ø¬Ø´Ø¹.
                </div>
                <div class="sentiment-meter">
                    <div id="sentimentPointer" class="sentiment-pointer" style="left: 50%;"></div>
                </div>
                <div class="heatbar-labels">
                    <span>Ø®ÙˆÙ Ø´Ø¯ÙŠØ¯</span>
                    <span>Ø­Ø°Ø±</span>
                    <span>Ø·Ø¨ÙŠØ¹Ù‰</span>
                    <span>Ø¬Ø´Ø¹</span>
                </div>
            </div>

            <!-- HEATMAP -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Crypto Market Heatmap (ØªÙ‚Ø¯ÙŠØ±)</div>
                    <div class="card-tag">BTC-led Buckets</div>
                </div>
                <div class="subtext">
                    Ø®Ø±ÙŠØ·Ø© Ù…ØµØºØ±Ø© Ù„Ø­Ø±ÙƒØ© Ø¨Ø¹Ø¶ â€œØ§Ù„Ø³Ù„Ø§Ù„â€ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¹Ù…Ù„Ø§Øª (Majors / DeFi / Meme / AI) ÙƒÙ…Ø¤Ø´Ø± Ø³Ø±ÙŠØ¹ Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø²Ø®Ù… Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ†.
                </div>
                <div class="heatmap-grid" id="heatmapGrid"></div>
            </div>

            <!-- ØªØ¯ÙÙ‚ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù„Ø­Ø¸Ù‰ -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">ØªØ¯ÙÙ‚ Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù„Ø­Ø¸Ù‰ â€” Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</div>
                    <div class="card-tag">Order Flow Snapshot</div>
                </div>
                <div class="card-main" id="orderFlowValue">---</div>
                <div class="subtext" id="orderFlowText">
                    ØªÙ‚Ø¯ÙŠØ± ØªÙ‚Ø±ÙŠØ¨Ù‰ Ù„ØªÙˆØ§Ø²Ù† Ø§Ù„Ø¶ØºØ· Ø¨ÙŠÙ† Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† ÙˆØ§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„ØªÙ‚Ù„Ø¨ ÙˆÙ†Ø¨Ø¶ Ø§Ù„Ø³ÙŠÙˆÙ„Ø© Ø§Ù„Ø­Ø§Ù„Ù‰.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ†:</span>
                        <span class="kpi-val" id="buyersShare">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†:</span>
                        <span class="kpi-val" id="sellersShare">---</span>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù„Ø­Ø¸Ù‰ â€” Real-Time Engine -->
            <div class="card span-1" id="rtEngineCard">
                <div class="card-header">
                    <div class="card-title">Ù…Ø­Ø±Ùƒ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù„Ø­Ø¸Ù‰ â€” Real-Time Engine</div>
                    <div class="card-tag">Momentum Â· Pressure Â· Shock</div>
                </div>
                <div class="card-main" id="rtMomentumValue">---</div>
                <div class="subtext" id="rtMomentumText">
                    Ù‚Ø±Ø§Ø¡Ø© Ù„Ø­Ø¸ÙŠØ© Ù„Ø²Ø®Ù… Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ÙˆØ¶ØºØ· Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ§Ø­ØªÙ…Ø§Ù„ Ø­Ø¯ÙˆØ« ØµØ¯Ù…Ø© Ø³Ø¹Ø±ÙŠØ© Ù‚ØµÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ù‰.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø²Ø®Ù… Ø§Ù„Ø§ØªØ¬Ø§Ù‡:</span>
                        <span class="kpi-val" id="rtMomentumLabel">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¶ØºØ· Ø§Ù„Ø³ÙˆÙ‚:</span>
                        <span class="kpi-val" id="rtPressureLabel">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø­Ø§Ù„Ø© Ø§Ù„ØµØ¯Ù…Ø©:</span>
                        <span class="kpi-val" id="rtShockLabel">---</span>
                    </div>
                </div>
                <div class="meter-wrapper">
                    <div class="meter-label">Momentum Gauge</div>
                    <div class="meter-bar">
                        <div id="rtMomentumBar" class="meter-fill"></div>
                    </div>
                    <div class="meter-label">Shock Detector</div>
                    <div class="meter-bar">
                        <div id="rtShockBar" class="meter-fill"></div>
                    </div>
                </div>
            </div>

            <!-- ØªÙˆÙ‚Ø¹ Ù‚ØµÙŠØ± Ø§Ù„Ù…Ø¯Ù‰ -->
            <div class="card span-2">
                <div class="card-header">
                    <div class="card-title">ØªÙˆÙ‚Ø¹ Ù‚ØµÙŠØ± Ø§Ù„Ù…Ø¯Ù‰ (â‰ˆ 15â€“30 Ø¯Ù‚ÙŠÙ‚Ø©)</div>
                    <div class="card-tag">Short-Term Bias</div>
                </div>
                <div class="card-main" id="shortTermBias">---</div>
                <div class="subtext" id="shortTermText">
                    Ø§Ù†Ø­ÙŠØ§Ø² Ø­Ø±ÙƒÙ‰ Ù‚ØµÙŠØ± Ø§Ù„Ù…Ø¯Ù‰ Ù…Ø¨Ù†Ù‰ Ø¹Ù„Ù‰ Ø¯Ù…Ø¬ Ø§Ù„ØªØºÙŠÙŠØ± Ø§Ù„ÙŠÙˆÙ…Ù‰ Ù…Ø¹ Ø¯Ø±Ø¬Ø© Ø§Ù„ØªÙ‚Ù„Ø¨ ÙˆÙ‚ÙˆØ© Ø§Ù„Ø³ÙˆÙ‚.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ØµØ¹ÙˆØ¯:</span>
                        <span class="kpi-val" id="upProb">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ù‡Ø¨ÙˆØ·:</span>
                        <span class="kpi-val" id="downProb">---</span>
                    </div>
                </div>
            </div>

            <!-- ÙÙ„ØªØ± Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ ÙÙ‰ Ø§Ù„Ø­Ø±ÙƒØ© -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">ÙÙ„ØªØ± Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ ÙÙ‰ Ø§Ù„Ø­Ø±ÙƒØ©</div>
                    <div class="card-tag">Market Noise Filter</div>
                </div>
                <div class="card-main" id="noiseValue">---</div>
                <div class="subtext" id="noiseText">
                    ÙŠÙ‚ÙŠØ³ ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø±ÙƒØ© â€œØ§Ù„Ø¹Ø¨Ø«ÙŠØ©â€ Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù‡Ø§Ø¯ÙØ©Ø› ÙŠØ³Ø§Ø¹Ø¯ ÙÙ‰ Ù…Ø¹Ø±ÙØ© Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø£ÙØ¶Ù„ Ø¹Ø¯Ù… Ø§Ù„Ù…Ø·Ø§Ø±Ø¯Ø© ÙˆØ§Ù†ØªØ¸Ø§Ø± Ù…Ù†Ø§Ø·Ù‚ Ø£ÙˆØ¶Ø­.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¯Ø±Ø¬Ø© Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©:</span>
                        <span class="kpi-val" id="noiseScore">---</span>
                    </div>
                </div>
            </div>

            <!-- ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙƒØ§Ù„Ø¨ÙŠÙ†Ø¬ -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙƒØ§Ù„Ø¨ÙŠÙ†Ø¬ (Scalper Mode)</div>
                    <div class="card-tag">Scalper Suitability</div>
                </div>
                <div class="card-main" id="scalpSuitability">---</div>
                <div class="subtext" id="scalpText">
                    ØªÙ‚ÙŠÙŠÙ… Ø³Ø±ÙŠØ¹ Ù„Ù…Ø¯Ù‰ Ù…Ù„Ø§Ø¡Ù…Ø© Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø³ÙƒØ§Ù„Ø¨ÙŠÙ†Ø¬ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© (Ø­Ø±ÙƒØ© Ã— ØªÙ‚Ù„Ø¨ Ã— Ø¶ÙˆØ¶Ø§Ø¡).
                </div>
            </div>

            <!-- Ù†Ø¨Ø¶ Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Ù†Ø¨Ø¶ Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚</div>
                    <div class="card-tag">BTC Dominance Pulse (ØªÙ‚Ø¯ÙŠØ±)</div>
                </div>
                <div class="card-main" id="dominanceValue">---</div>
                <div class="subtext" id="dominanceText"></div>
            </div>

            <!-- Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡ -->
            <div class="card span-1">
                <div class="card-header">
                    <div class="card-title">Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡ (Trend Temperature)</div>
                    <div class="card-tag">Momentum Gauge</div>
                </div>
                <div class="card-main" id="trendTempValue">---</div>
                <div class="subtext" id="trendTempText"></div>
            </div>

            <!-- ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù… -->
            <div class="card span-1" id="systemHealthCard">
                <div class="card-header">
                    <div class="card-title">ØµØ­Ø© Ù†Ø¸Ø§Ù… IN CRYPTO Ai</div>
                    <div class="card-tag">System Health</div>
                </div>
                <div class="card-main" id="systemHealthValue">...</div>
                <div class="subtext" id="systemHealthText">
                    ÙŠØªÙ… ØªÙ‚ÙŠÙŠÙ… ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ø³ØªÙ†Ø§Ø¯Ù‹Ø§ Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© Ù…Ø­Ø±Ùƒ Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŒ Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©ØŒ ÙˆØ§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª Ø§Ù„Ø¢Ù„ÙŠØ©.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¢Ø®Ø± Ø®Ø·Ø£:</span>
                        <span class="kpi-val" id="systemLastError">---</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¢Ø®Ø± ØªØ­Ø°ÙŠØ±:</span>
                        <span class="kpi-val" id="systemLastAlert">---</span>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ù„ÙˆØ¬ -->
            <div class="card span-2" id="errorCard">
                <div class="card-header">
                    <div class="card-title">Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„Ù„ÙˆØ¬</div>
                    <div class="card-tag">Last error + Logs</div>
                </div>
                <div class="card-main" id="lastErrorTitle">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø®Ø·Ø§Ø¡ Ù…Ø³Ø¬Ù„Ø©</div>
                <div class="subtext">
                    ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø£Ù‰ Ø®Ø·Ø£ ÙÙ‰ Ø§Ù„Ø¨ÙˆØªØŒ Ù…Ø¹ Ø¹Ø±Ø¶ Snapshot Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ø§Ù„Ù„ÙˆØ¬.
                </div>
                <pre id="logsSnapshot">Ø¬Ø§Ø±Ù‰ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ¬...</pre>
            </div>

            <!-- Ø¨Ø·Ø§Ù‚Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª ÙˆÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù€ API -->
            <div class="card span-3" id="enginesCard">
                <div class="card-header">
                    <div class="card-title">Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø­Ø±ÙƒØ§Øª ÙˆÙˆØ§Ø¬Ù‡Ø§Øª API</div>
                    <div class="card-tag">Engines & API Monitor</div>
                </div>
                <div class="subtext" id="enginesSummary">
                    ÙŠØªÙ… Ù…ØªØ§Ø¨Ø¹Ø© Ø¢Ø®Ø± Ù†Ø´Ø§Ø· Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ« (Real-Time / Smart Alert / Weekly / Webhook / Watchdog / Keep-Alive) Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ø¬Ù‡Ø§Øª Binance Ùˆ KuCoin.
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Real-Time:</span>
                        <span class="kpi-val" id="engRealtime">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Smart Alert:</span>
                        <span class="kpi-val" id="engSmart">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Weekly:</span>
                        <span class="kpi-val" id="engWeekly">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Webhook:</span>
                        <span class="kpi-val" id="engWebhook">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Watchdog:</span>
                        <span class="kpi-val" id="engWatchdog">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Keep-Alive:</span>
                        <span class="kpi-val" id="engKeepAlive">...</span>
                    </div>
                </div>
                <div class="kpi-row">
                    <div class="kpi-pill">
                        <span class="kpi-label">Binance API:</span>
                        <span class="kpi-val" id="apiBinance">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">KuCoin API:</span>
                        <span class="kpi-val" id="apiKucoin">...</span>
                    </div>
                    <div class="kpi-pill">
                        <span class="kpi-label">Ø¢Ø®Ø± ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹Ù‰:</span>
                        <span class="kpi-val" id="engLastWeekly">...</span>
                    </div>
                </div>
            </div>

            <!-- Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª -->
            <div class="card span-3">
                <div class="card-header">
                    <div class="card-title">Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª</div>
                    <div class="card-tag">Alerts History</div>
                </div>
                <div class="alerts-list" id="alertsList">
                    Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„...
                </div>
                <div class="btn-row">
                    <button onclick="reloadAlerts()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„ ğŸ”„</button>
                    <button onclick="clearAlerts()">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ ğŸ§¹</button>
                </div>
            </div>

            <!-- ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹Ù‰ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙˆÙ… -->
            <div class="card span-3">
                <div class="card-header">
                    <div class="card-title">ØªØ¹Ù„ÙŠÙ‚ IN CRYPTO Ai Ø¹Ù„Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙˆÙ…</div>
                    <div class="card-tag">AI Market Commentary</div>
                </div>
                <div class="subtext" id="aiComment">
                    Ø¬Ø§Ø±Ù ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ¹Ù„ÙŠÙ‚...
                </div>
            </div>

        </div>

        <!-- ========== FOOTER ========== -->
        <div class="footer">
            IN CRYPTO Ai â€” <span>Live Market Â· Risk Â· Alert Monitor</span> Ù…Ø¨Ù†Ù‰ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† Ø§Ù„ÙØ¹Ù„ÙŠØ©.
        </div>
    </div>

    <script>

//
// =========================
//  WAR ROOM ENGINE â€” v3.0
// =========================
//  ÙƒÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Binance ÙÙ‚Ø· (Ù…Ø¬Ø§Ù†ÙŠØ© 100%)
//  ÙˆØªÙ… ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¯Ù‚Ø© Ù„Ø£Ù‚ØµÙ‰ Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ø§Ø´ØªØ±Ø§ÙƒØ§Øª.
//


const API_URL = "/dashboard_api";     // Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø§Ù„Ù„Ù‰ Ø¨ÙŠØ³Ø­Ø¨ Ù…Ù†Ù‡ Ø§Ù„Ø¨Ø§Ùƒ Ø¥Ù†Ø¯
const ALERTS_URL = "/alerts_history";
const ADMIN_URL = "/admin_cmd";

let lastData = null;
let alertFlashState = false;



// ==============================
//     ğŸ”¥ ÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ù…Ø© Ù…Ø³Ø§Ø¹Ø¯Ø©
// ==============================

function fmt(n) {
    if (n === null || n === undefined) return "---";
    if (typeof n === "number") {
        if (Math.abs(n) >= 1) return n.toFixed(2);
        return n.toFixed(4);
    }
    return n;
}

function pct(n) {
    if (n === null || n === undefined) return "---";
    return n.toFixed(2) + "%";
}

function clamp(x, a, b) {
    return Math.min(Math.max(x, a), b);
}



// ==============================
//     ğŸ”¥ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ Heatbar
// ==============================

function updateHeatBar(score) {
    const dot = document.getElementById("heatDot");
    if (!dot) return;

    // score (0 â†’ 100)
    const pos = clamp(score, 0, 100);

    dot.style.left = pos + "%";
}



// ==============================
//     ğŸ”¥ ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ù€ Sentiment
// ==============================

function updateSentiment(sentiment) {
    const idx = document.getElementById("sentimentIndex");
    const label = document.getElementById("sentimentLabel");
    const badge = document.getElementById("sentimentBadge");
    const pointer = document.getElementById("sentimentPointer");

    if (!sentiment) return;

    idx.textContent = `${fmt(sentiment.score)} / 100`;
    pointer.style.left = sentiment.score + "%";

    let text = "";
    let color = "";

    if (sentiment.score < 25) {
        text = "Ø®ÙˆÙ Ø´Ø¯ÙŠØ¯";
        color = "red";
    } else if (sentiment.score < 45) {
        text = "Ø­Ø°Ø±";
        color = "gold";
    } else if (sentiment.score < 70) {
        text = "Ø·Ø¨ÙŠØ¹Ù‰";
        color = "green";
    } else {
        text = "Ø¬Ø´Ø¹";
        color = "gold";
    }

    label.textContent = text;

    badge.style.borderColor =
        color === "green" ? "#22c55e"
        : color === "red" ? "#ef4444"
        : "#fbbf24";
}



// ==============================
// ğŸ”¥ HEATMAP (Ø¹Ù…Ù„Ø§Øª ØªÙ‚Ø¯ÙŠØ±ÙŠØ©)
// ==============================

function updateHeatmap(buckets) {
    const grid = document.getElementById("heatmapGrid");
    if (!grid) return;

    grid.innerHTML = "";

    buckets.forEach(cell => {
        const div = document.createElement("div");
        div.className = "heatmap-cell";

        div.innerHTML = `
            <div class="heatmap-symbol">${cell.name}</div>
            <div class="heatmap-change" style="color:${
                cell.change > 0 ? "#22c55e" :
                cell.change < 0 ? "#ef4444" : "#e5e7eb"
            }">
                ${fmt(cell.change)}%
            </div>
        `;

        grid.appendChild(div);
    });
}



// ==============================
// ğŸ”¥ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø°ÙŠØ± â€” Flash
// ==============================

function updateAlertFlash(active) {
    const card = document.getElementById("alertFlashCard");
    if (!card) return;

    if (active) card.classList.add("flash");
    else card.classList.remove("flash");
}



// ==============================
// ğŸ”¥ Ø·Ù„Ø¨Ø§Øª ØªØ­ÙƒÙ… Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
// ==============================

function callAdmin(cmd) {
    fetch(`${ADMIN_URL}?cmd=${cmd}`)
        .then(r => r.text())
        .then(t => {
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±:\n" + cmd + "\n\n" + t);
        })
        .catch(() => alert("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±"));
}



// ==============================
// ğŸ”¥ Ø³Ø¬Ù„ Ø§Ù„ØªØ­Ø°ÙŠØ±Ø§Øª
// ==============================

function reloadAlerts() {
    fetch(ALERTS_URL)
        .then(r => r.json())
        .then(alerts => {
            const area = document.getElementById("alertsList");
            if (!area) return;

            if (!alerts || alerts.length === 0) {
                area.textContent = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ø³Ø¬Ù„Ø©.";
                return;
            }

            area.innerHTML = alerts.map(a => `
                <div class="alert-item">
                    <strong>âŸ¹ ${a.time}</strong><br>
                    ${a.msg}
                </div>
            `).join("");
        });
}

function clearAlerts() {
    fetch(`${ALERTS_URL}?clear=1`)
        .then(r => r.text())
        .then(() => reloadAlerts());
}



// ==============================
//     ğŸ”¥ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ BTC BAR Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
// ==============================

function updateTopBar(data) {
    document.getElementById("barPrice").textContent = fmt(data.price);
    document.getElementById("barChange").textContent =
        data.change >= 0 ? "+" + fmt(data.change) + "%" : fmt(data.change) + "%";

    document.getElementById("barChange").className =
        "btc-val " + (data.change >= 0 ? "btc-green" : "btc-red");

    document.getElementById("barRange").textContent = fmt(data.range) + "%";

    document.getElementById("marketModeChip").textContent =
        data.change < -3 ? "ALERT MODE" :
        data.change > 3  ? "ACTIVE MODE" :
                           "NORMAL MODE";

    document.getElementById("badgeMode").textContent =
        document.getElementById("marketModeChip").textContent;
}



// ==============================
//     ğŸ”¥ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³Ù‰ â€” ØªØ­Ø¯ÙŠØ« ÙƒØ§Ù…Ù„
// ==============================

function updateDashboard(data) {

    lastData = data;

    // --------------------- Ø¨Ø·Ø§Ù‚Ø© Ù‚ÙˆØ© Ø§Ù„Ø³ÙˆÙ‚ ---------------------
    document.getElementById("strengthValue").textContent =
        `${fmt(data.strength.score)} / 100`;

    document.getElementById("kpiChange").textContent = pct(data.change);
    document.getElementById("kpiRange").textContent = pct(data.range);
    document.getElementById("kpiHeat").textContent = fmt(data.heat);

    updateHeatBar(data.heat);



    // --------------------- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ---------------------
    document.getElementById("riskValue").textContent = fmt(data.risk.score);
    document.getElementById("riskNote").textContent = data.risk.note;
    document.getElementById("kpiVol").textContent = fmt(data.volatility);
    document.getElementById("kpiMode").textContent = data.market_mode;



    // --------------------- Ø³ÙŠÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚ ---------------------
    document.getElementById("liquidityValue").textContent = fmt(data.liquidity.score);
    document.getElementById("liqLabel").textContent = data.liquidity.label;
    document.getElementById("signalPulse").textContent = data.liquidity.signal;



    // --------------------- Ø§Ù„ØªÙ‚Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ…Ù‰ ---------------------
    document.getElementById("volatilityValue").textContent = fmt(data.volatility_score);
    document.getElementById("rangeDetail").textContent = pct(data.range);
    document.getElementById("volatilityLabel").textContent = data.volatility_label;



    // --------------------- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø°ÙŠØ± ---------------------
    document.getElementById("alertReason").textContent = data.alert.reason;
    document.getElementById("alertTime").textContent = data.alert.time;
    document.getElementById("alertSent").textContent = data.alert.sent ? "Ù†Ø¹Ù…" : "Ù„Ø§";

    updateAlertFlash(data.alert.active);



    // --------------------- Sentiment ---------------------
    updateSentiment(data.sentiment);



    // --------------------- HEATMAP ---------------------
    updateHeatmap(data.heatmap);



    // --------------------- Order Flow ---------------------
    document.getElementById("orderFlowValue").textContent = data.orderflow.label;
    document.getElementById("orderFlowText").textContent = data.orderflow.text;
    document.getElementById("buyersShare").textContent = pct(data.orderflow.buyers);
    document.getElementById("sellersShare").textContent = pct(data.orderflow.sellers);



    // --------------------- Real-Time Engine ---------------------
    document.getElementById("rtMomentumValue").textContent = fmt(data.rt.momentum.value);
    document.getElementById("rtMomentumText").textContent = data.rt.momentum.text;

    document.getElementById("rtMomentumLabel").textContent = data.rt.momentum.label;
    document.getElementById("rtPressureLabel").textContent = data.rt.pressure.label;
    document.getElementById("rtShockLabel").textContent = data.rt.shock.label;

    document.getElementById("rtMomentumBar").style.width = data.rt.momentum.value + "%";
    document.getElementById("rtShockBar").style.width = data.rt.shock.level + "%";



    // --------------------- Short Term Bias ---------------------
    document.getElementById("shortTermBias").textContent = data.shortterm.label;
    document.getElementById("shortTermText").textContent = data.shortterm.text;
    document.getElementById("upProb").textContent = pct(data.shortterm.up);
    document.getElementById("downProb").textContent = pct(data.shortterm.down);



    // --------------------- Noise Filter ---------------------
    document.getElementById("noiseValue").textContent = data.noise.label;
    document.getElementById("noiseText").textContent = data.noise.text;
    document.getElementById("noiseScore").textContent = fmt(data.noise.score);



    // --------------------- Scalper Mode ---------------------
    document.getElementById("scalpSuitability").textContent = data.scalp.label;
    document.getElementById("scalpText").textContent = data.scalp.text;



    // --------------------- Dominance ---------------------
    document.getElementById("dominanceValue").textContent = fmt(data.dominance.score);
    document.getElementById("dominanceText").textContent = data.dominance.text;



    // --------------------- Trend Temperature ---------------------
    document.getElementById("trendTempValue").textContent = fmt(data.trend_temp.score);
    document.getElementById("trendTempText").textContent = data.trend_temp.text;



    // --------------------- System Health ---------------------
    document.getElementById("systemHealthValue").textContent = data.health.status;
    document.getElementById("systemLastError").textContent = data.health.last_error;
    document.getElementById("systemLastAlert").textContent = data.health.last_alert;



    // --------------------- Logs ---------------------
    document.getElementById("lastErrorTitle").textContent = data.log.last_error_title;
    document.getElementById("logsSnapshot").textContent = data.log.snapshot;



    // --------------------- Engines & API ---------------------
    document.getElementById("engRealtime").textContent = data.engines.realtime;
    document.getElementById("engSmart").textContent = data.engines.smart;
    document.getElementById("engWeekly").textContent = data.engines.weekly;
    document.getElementById("engWebhook").textContent = data.engines.webhook;
    document.getElementById("engWatchdog").textContent = data.engines.watchdog;
    document.getElementById("engKeepAlive").textContent = data.engines.keepalive;

    document.getElementById("apiBinance").textContent = data.api.binance_ok ? "Ø´ØºØ§Ù„ âœ”ï¸" : "âŒ Ù…Ø´ÙƒÙ„Ø©";
    document.getElementById("apiKucoin").textContent = data.api.kucoin_ok ? "Ø´ØºØ§Ù„ âœ”ï¸" : "âŒ Ù…Ø´ÙƒÙ„Ø©";

    document.getElementById("engLastWeekly").textContent = data.engines.last_weekly;



    // --------------------- AI COMMENT ---------------------
    document.getElementById("aiComment").textContent = data.ai.comment;



    // --------------------- ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© ---------------------
    updateTopBar(data);
}



// ==============================
//     ğŸ”¥ Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 1 Ø«Ø§Ù†ÙŠØ©
// ==============================

function mainLoop() {
    fetch(API_URL)
        .then(r => r.json())
        .then(data => {
            updateDashboard(data);
        })
        .catch(err => {
            console.log("Dashboard fetch error:", err);
        });
}

setInterval(mainLoop, 1000);
mainLoop();

</script>
